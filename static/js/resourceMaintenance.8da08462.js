(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["resourceMaintenance"],{"06d0":function(e,t,s){},"210c":function(e,t,s){"use strict";var a=s("acc8"),l=s.n(a);l.a},"7d86":function(e,t,s){"use strict";function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",function(){return a})},acc8:function(e,t,s){},c839:function(e,t,s){var a=s("e6bd").f,l=Function.prototype,i=/^\s*function ([^ (]*)/,o="name";o in l||s("4f1d")&&a(l,o,{configurable:!0,get:function(){try{return(""+this).match(i)[1]}catch(e){return""}}})},d127:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":e.loadingText}},[s("el-header",{staticClass:"header resource-header"},[s("section",{staticClass:"section"},[s("span",{staticClass:"title"},[e._v("资源名称：")]),s("el-input",{staticClass:"my-input",attrs:{size:"small",placeholder:"请输入资源名称",maxlength:"20",clearable:""},model:{value:e.searchConfig.resNm,callback:function(t){e.$set(e.searchConfig,"resNm",t)},expression:"searchConfig.resNm"}})],1),s("section",{staticClass:"section"},[s("span",{staticClass:"title"},[e._v("资源所属系统：")]),s("el-select",{staticClass:"my-select",attrs:{size:"small"},model:{value:e.searchConfig.stmId,callback:function(t){e.$set(e.searchConfig,"stmId",t)},expression:"searchConfig.stmId"}},e._l(e.resourceSysOption,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("section",{staticClass:"section"},[s("span",{staticClass:"title"},[e._v("资源类型：")]),s("el-select",{staticClass:"my-select",attrs:{size:"small"},model:{value:e.searchConfig.resTpId,callback:function(t){e.$set(e.searchConfig,"resTpId",t)},expression:"searchConfig.resTpId"}},e._l(e.resTpIdOption,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("section",{staticClass:"section"},[s("span",{staticClass:"title"},[e._v("资源状态：")]),s("el-select",{staticClass:"my-select",attrs:{size:"small"},model:{value:e.searchConfig.avlSt,callback:function(t){e.$set(e.searchConfig,"avlSt",t)},expression:"searchConfig.avlSt"}},e._l(e.avlStOption,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("section",{staticClass:"section"},[s("el-button",{staticClass:"search",attrs:{size:"small",height:"32"},on:{click:e.getReData}},[e._v("搜索")])],1)]),s("div",{staticClass:"buttons",staticStyle:{"padding-left":"20px","margin-bottom":"10px"}},[s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.addResource}},[e._v("新增")]),s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.modifyRe}},[e._v("修改")]),s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.deleteRe}},[e._v("删除")]),s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.showDetail}},[e._v("查看详情")]),s("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.showIns}},[e._v("查看使用说明")])],1),s("el-main",{staticStyle:{heigth:"400px",padding:"0 20px"}},[s("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableConfig.tableData,"header-row-class-name":e.tableConfig.tableHeaderClass,stripe:""},on:{select:e.selectResource,"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",width:"60"}}),e._l(e.tableConfig.tableHead,function(e,t){return s("el-table-column",{key:t,attrs:{prop:e.prop,label:e.label,width:e.width}})}),s("el-table-column",{attrs:{prop:"stmId",label:"资源所属系统"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("stmIdFilter")(t.row.stmId)))])]}}])}),s("el-table-column",{attrs:{prop:"resTpId",label:"资源类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("resTpIdFilter")(t.row.resTpId)))])]}}])}),s("el-table-column",{attrs:{prop:"avlSt",label:"资源状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("span",[e._v(e._s(e._f("avlStFilter")(t.row.avlSt)))])]}}])})],2)],1),s("el-footer",[s("el-pagination",{staticStyle:{width:"600px",margin:"0 auto"},attrs:{"current-page":e.paginatioinConfig.start,"page-sizes":e.paginatioinConfig.sizes,"page-size":e.paginatioinConfig.maxRows,layout:"total, sizes, prev, pager, next, jumper",total:e.paginatioinConfig.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),s("el-dialog",{staticClass:"my-dialog",attrs:{title:"新增资源",visible:e.dialogConfig.visible.addDialog,"before-close":e.clearFormRules},on:{"update:visible":function(t){e.$set(e.dialogConfig.visible,"addDialog",t)}}},[s("el-form",{ref:"addResourceInfo",attrs:{model:e.addResourceInfo,"label-width":"120px",rules:e.checkRules}},[s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源名称",prop:"resNm"}},[s("el-input",{attrs:{placeholder:"请输入资源名称",maxlength:"20",clearable:""},model:{value:e.addResourceInfo.resNm,callback:function(t){e.$set(e.addResourceInfo,"resNm",t)},expression:"addResourceInfo.resNm"}})],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源访问方法",prop:"resOptp"}},[s("el-select",{attrs:{placeholder:"请选择资源所属系统"},model:{value:e.addResourceInfo.resOptp,callback:function(t){e.$set(e.addResourceInfo,"resOptp",t)},expression:"addResourceInfo.resOptp"}},e._l(e.resOptpOption,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源状态",prop:"avlSt"}},[s("el-select",{attrs:{placeholder:"请选择资源状态"},model:{value:e.addResourceInfo.avlSt,callback:function(t){e.$set(e.addResourceInfo,"avlSt",t)},expression:"addResourceInfo.avlSt"}},e._l(e.avlStOption.filter(function(e){return e.value}),function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"资源所属系统",prop:"stmId"}},[s("el-select",{attrs:{placeholder:"请选择资源所属系统"},model:{value:e.addResourceInfo.stmId,callback:function(t){e.$set(e.addResourceInfo,"stmId",t)},expression:"addResourceInfo.stmId"}},e._l(e.resourceSysOption.filter(function(e){return e.value}),function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"资源类型",prop:"resTpId"}},[s("el-select",{attrs:{placeholder:"请选择资源类型"},model:{value:e.addResourceInfo.resTpId,callback:function(t){e.$set(e.addResourceInfo,"resTpId",t)},expression:"addResourceInfo.resTpId"}},e._l(e.resTpIdOption.filter(function(e){return e.value}),function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源描述",prop:"resDsc"}},[s("el-input",{attrs:{type:"textarea",maxlength:"300",autosize:{minRows:4,maxRows:12},size:"medium",placeholder:"请输入资源描述"},model:{value:e.addResourceInfo.resDsc,callback:function(t){e.$set(e.addResourceInfo,"resDsc",t)},expression:"addResourceInfo.resDsc"}})],1),s("el-form-item",{attrs:{label:"资源使用说明",prop:"resRte"}},[s("el-upload",{attrs:{limit:1,action:e.resourceFileAction,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload,"on-success":e.resSucc}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),s("el-form-item",{attrs:{label:"输出为产品",prop:"initPd"}},[s("el-select",{attrs:{placeholder:"请选择是否输出为产品"},model:{value:e.addResourceInfo.initPd,callback:function(t){e.$set(e.addResourceInfo,"initPd",t)},expression:"addResourceInfo.initPd"}},e._l(e.initPd,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.addResourceInfo.initPd,expression:"addResourceInfo.initPd == '1'"}],staticStyle:{width:"600px"},attrs:{label:"产品名称",prop:"pdNm"}},[s("el-input",{attrs:{placeholder:"请输入产品名称",clearable:""},model:{value:e.addResourceInfo.pdNm,callback:function(t){e.$set(e.addResourceInfo,"pdNm",t)},expression:"addResourceInfo.pdNm"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.addResourceInfo.initPd,expression:"addResourceInfo.initPd == '1'"}],attrs:{label:"产品所属系统",prop:"pdBlngSbj"}},[s("el-select",{attrs:{placeholder:"请选择产品所属系统"},model:{value:e.addResourceInfo.pdBlngSbj,callback:function(t){e.$set(e.addResourceInfo,"pdBlngSbj",t)},expression:"addResourceInfo.pdBlngSbj"}},e._l(e.resourceSysOption.filter(function(e){return e.value}),function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.addResourceInfo.initPd,expression:"addResourceInfo.initPd == '1'"}],attrs:{label:"产品类型"}},[s("el-tree",{model:{value:e.addResourceInfo.pdTp,callback:function(t){e.$set(e.addResourceInfo,"pdTp",t)},expression:"addResourceInfo.pdTp"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.addResourceInfo.initPd,expression:"addResourceInfo.initPd == '1'"}],attrs:{label:"产品序号",prop:"pdDispNo"}},[s("el-input",{staticStyle:{width:"221px"},attrs:{placeholder:"请输入产品序号"},model:{value:e.addResourceInfo.pdDispNo,callback:function(t){e.$set(e.addResourceInfo,"pdDispNo",e._n(t))},expression:"addResourceInfo.pdDispNo"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.addResourceInfo.initPd,expression:"addResourceInfo.initPd == '1'"}],staticStyle:{width:"600px"},attrs:{label:"产品简介",prop:"pdBrf"}},[s("el-input",{attrs:{type:"textarea",placeholder:"请输入产品简介",maxlength:"300",autosize:{minRows:4,maxRows:12},size:"medium"},model:{value:e.addResourceInfo.pdBrf,callback:function(t){e.$set(e.addResourceInfo,"pdBrf",t)},expression:"addResourceInfo.pdBrf"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.addResourceInfo.initPd,expression:"addResourceInfo.initPd == '1'"}],attrs:{label:"产品Logo",prop:"pdLogoSrc"}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{limit:1,action:e.logoAction,"show-file-list":!1,"on-success":e.logoSucc,"before-upload":e.beforeAvatarUploadPro}},[e.imageUrl?s("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"==e.addResourceInfo.initPd,expression:"addResourceInfo.initPd == '1'"}],attrs:{label:"产品使用说明",prop:"pdUrl"}},[s("el-upload",{attrs:{limit:1,action:e.productFileAction,"on-exceed":e.handleExceed,"before-upload":e.beforeAvatarUpload}},[s("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"confirmEdit",attrs:{height:"32",size:"small"},on:{click:function(t){e.submitForm("addResourceInfo")}}},[e._v("确定")]),s("el-button",{staticClass:"cancelEdit",attrs:{height:"32",size:"small"},on:{click:function(t){e.cancleNewRe("addResourceInfo")}}},[e._v("取消")])],1)],1),s("el-dialog",{staticClass:"my-dialog",attrs:{title:"修改资源",visible:e.dialogConfig.visible.modifyDialog},on:{"update:visible":function(t){e.$set(e.dialogConfig.visible,"modifyDialog",t)}}},[s("el-form",{ref:"modifyReInfo",attrs:{model:e.modifyReInfo,"label-width":"120px",rules:e.rules}},[s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源名称",prop:"resNm"}},[s("el-input",{attrs:{placeholder:"请输入资源名称",maxlength:"20",clearable:""},model:{value:e.modifyReInfo.resNm,callback:function(t){e.$set(e.modifyReInfo,"resNm",t)},expression:"modifyReInfo.resNm"}})],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源描述"}},[s("el-input",{attrs:{type:"textarea",maxlength:"300",autosize:{minRows:4,maxRows:12},size:"medium",placeholder:"请输入资源描述"},model:{value:e.modifyReInfo.resDsc,callback:function(t){e.$set(e.modifyReInfo,"resDsc",t)},expression:"modifyReInfo.resDsc"}})],1),s("el-form-item",{attrs:{label:"资源类型",prop:"resTpId"}},[s("el-select",{attrs:{placeholder:"请选择资源类型"},model:{value:e.modifyReInfo.resTpId,callback:function(t){e.$set(e.modifyReInfo,"resTpId",t)},expression:"modifyReInfo.resTpId"}},e._l(e.resTpIdOption.filter(function(e){return e.value}),function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"资源所属系统",prop:"stmId"}},[s("el-select",{attrs:{placeholder:"请选择资源所属系统"},model:{value:e.modifyReInfo.stmId,callback:function(t){e.$set(e.modifyReInfo,"stmId",t)},expression:"modifyReInfo.stmId"}},e._l(e.resourceSysOption.filter(function(e){return e.value}),function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"资源访问方法",prop:"resOptp"}},[s("el-select",{attrs:{placeholder:"请选择资源状态"},model:{value:e.modifyReInfo.resOptp,callback:function(t){e.$set(e.modifyReInfo,"resOptp",t)},expression:"modifyReInfo.resOptp"}},e._l(e.resOptpOption,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"资源状态",prop:"avlSt"}},[s("el-select",{attrs:{placeholder:"请选择资源状态"},model:{value:e.modifyReInfo.avlSt,callback:function(t){e.$set(e.modifyReInfo,"avlSt",t)},expression:"modifyReInfo.avlSt"}},e._l(e.avlStOption.filter(function(e){return e.value}),function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"资源使用说明",prop:"pdUrl"}})],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"confirmEdit",attrs:{height:"32",size:"small"},on:{click:function(t){e.confirmEdit("modifyReInfo")}}},[e._v("确定")]),s("el-button",{staticClass:"cancelEdit",attrs:{height:"32",size:"small"},on:{click:e.cancelEdit}},[e._v("取消")])],1)],1),s("el-dialog",{staticClass:"my-dialog",attrs:{title:"删除资源",visible:e.dialogConfig.visible.deleteDialog},on:{"update:visible":function(t){e.$set(e.dialogConfig.visible,"deleteDialog",t)}}},[s("p",[e._v("\n      是否删除ID为\n      "),e._l(e.selectReId,function(t){return s("b",{key:t.resId},[e._v("  "+e._s(t.resId)+"  ")])}),e._v("的资源？\n    ")],2),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"confirmDelete",attrs:{height:"32",size:"small"},on:{click:e.confirmDelete}},[e._v("确定")]),s("el-button",{staticClass:"cancelEdit",attrs:{height:"32",size:"small"},on:{click:e.cancelEdit}},[e._v("取消")])],1)]),s("el-dialog",{staticClass:"my-dialog",attrs:{title:"资源详情",visible:e.dialogConfig.visible.detailDialog},on:{"update:visible":function(t){e.$set(e.dialogConfig.visible,"detailDialog",t)}}},[e._l(e.reDetail,function(t){return s("el-form",{key:t.resId,ref:"addResourceInfo",refInFor:!0,attrs:{model:e.addResourceInfo,"label-width":"100px"}},[s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源名称"}},[s("el-tag",{attrs:{type:"info"}},[e._v(e._s(t.resNm))])],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源LOGO"}}),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源描述"}},[s("el-tag",{attrs:{type:"info"}},[e._v(e._s(e._f("resDscFilter")(t.resDsc)))])],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源所属系统"}},[s("el-tag",{attrs:{type:"info"}},[e._v(e._s(e._f("stmIdFilter")(t.stmId)))])],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源类型"}},[s("el-tag",{attrs:{type:"info"}},[e._v(e._s(e._f("resTpIdFilter")(t.resTpId)))])],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源状态"}},[s("el-tag",{attrs:{type:"info"}},[e._v(e._s(e._f("avlStFilter")(t.avlSt)))])],1),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"资源生命周期"}},[s("el-button",{attrs:{type:"text"},on:{click:e.rePeriod}},[e._v("查看资源生命周期")])],1)],1)}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"cancelEdit",attrs:{height:"32",size:"small",type:"primary"},on:{click:e.cancelEdit}},[e._v("关闭")])],1)],2),s("el-dialog",{staticClass:"my-dialog",attrs:{title:"资源生命周期",visible:e.dialogConfig.visible.periodDialog},on:{"update:visible":function(t){e.$set(e.dialogConfig.visible,"periodDialog",t)}}},[s("el-form",{ref:"addResourceInfo",attrs:{model:e.addResourceInfo,"label-width":"100px"}}),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticClass:"cancelEdit",attrs:{height:"32",size:"small",type:"primary"},on:{click:e.closePeriod}},[e._v("关闭")])],1)],1)],1)},l=[],i=(s("c839"),s("7d86"));function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},a=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),a.forEach(function(t){Object(i["a"])(e,t,s[t])})}return e}s("ff66"),s("ea23"),s("dbff"),s("f121");var r={name:"resourceMaintenance",data:function(){return{imageUrl:"",fileList:[],loading:!1,loadingText:"拼命加载中...",selectReId:[],searchConfig:{resNm:"",stmId:"",resTpId:"",avlSt:"",pageSize:10,pageIndex:1},resourceSysOption:[{value:"",label:"全部"},{label:"智能设备云",value:"1"},{label:"双录云",value:"2"}],resOptpOption:[{label:"GET",value:"GET"},{label:"POST",value:"POST"}],resTpIdOption:[{value:"",label:"全部"},{label:"页面级资源",value:"1"},{label:"外设资源",value:"2"},{label:"静态资源",value:"3"},{label:"REST资源",value:"4"},{label:"其他",value:"5"}],avlStOption:[{value:"",label:"全部"},{label:"可用",value:"1"},{label:"不可用",value:"2"}],initPd:[{label:"是",value:"1"},{label:"否",value:"2"}],tableConfig:{tableHead:[{prop:"resId",label:"资源ID",width:"",showOverflowTooltip:!0,fixed:!1},{prop:"resNm",label:"资源名称",width:"",align:"right",showOverflowTooltip:!0,fixed:!1}],tableData:[],tableHeaderClass:"my-table-header"},paginatioinConfig:{total:0,maxRows:1,size:10,sizes:[10,20,30],start:1},dialogConfig:{visible:{addDialog:!1,deleteDialog:!1,modifyDialog:!1,detailDialog:!1,instructionDialog:!1,periodDialog:!1},row:"",rowInfo:"",innerVisible:!1,formData:{appStDesc:""}},addResourceInfo:{stmId:"",resTpId:"",resNm:"",resDsc:"",resOptp:"",resRte:"",initPd:"",pdNm:"",pdBlngSbj:"",pdTp:"",pdDispNo:"",pdBrf:"",pdLogoSrc:"",pdUrl:""},checkRules:{},rules:{stmId:[{required:!0,message:"请选择资源所属系统",trigger:"change"}],resOptp:[{required:!0,message:"选择资源访问方法",trigger:"change"}],avlSt:[{required:!0,message:"选择资源状态",trigger:"change"}],resTpId:[{required:!0,message:"选择资源类型",trigger:"change"}],resNm:[{required:!0,message:"请输入资源名称",trigger:"change"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],resDsc:[{min:10,max:300,message:"长度在 10 到 300 个字符",trigger:"blur"}],resRte:[],initPd:[{required:!0,message:"请选择是否输出为产品",trigger:"change"}]},pdRules:{pdNm:[{required:!0,message:"请输入产品名称",trigger:"change"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],pdBlngSbj:[{required:!0,message:"请选择产品所属系统",trigger:"change"}],pdTp:[{required:!0,message:"选择产品类型",trigger:"change"}],pdDispNo:[{required:!0,message:"序号不能为空",trigger:"change"},{type:"number",message:"序号必须为数字值"}],pdBrf:[{min:10,max:300,message:"长度在 10 到 300 个字符",trigger:"blur"}],pdLogoSrc:[],pdUrl:[]},modifyReInfo:{resNm:"",resDsc:"",resTpId:"",stmId:"",resOptp:"",avlSt:"",resRte:""},reDetail:[],logoAction:"/upload?savePath=productLogo/".concat(sessionStorage.userId,"/"),productFileAction:"/upload?savePath=productFile/".concat(sessionStorage.userId,"/"),resourceFileAction:"/upload?savePath=resourceFile/".concat(sessionStorage.userId,"/")}},methods:{getReData:function(){this.getReList()},editResource:function(e){console.log(e),this.dialogConfig.visible=!0},handleSizeChange:function(e){this.paginatioinConfig.maxRows=e},handleCurrentChange:function(e){this.tableConfig.tableData=[],this.paginatioinConfig.start=e,this.searchConfig.pageSize=this.paginatioinConfig.size,this.searchConfig.pageIndex=this.paginatioinConfig.start,this.getReList()},cancelEdit:function(e){this.dialogConfig.visible.modifyDialog=!1,this.dialogConfig.visible.deleteDialog=!1,this.dialogConfig.visible.detailDialog=!1},cancleNewRe:function(e){this.dialogConfig.visible.addDialog=!1,this.$refs[e].resetFields()},addResource:function(){this.addResourceInfo={stmId:"",resTpId:"",resNm:"",resDsc:"",resOptp:"",resRte:"",initPd:"",pdNm:"",pdBlngSbj:"",pdTp:"",pdDispNo:"",pdBrf:"",pdLogoSrc:"",pdUrl:""},this.dialogConfig.visible.addDialog=!0},submitForm:function(e){var t=this;"1"===this.addResourceInfo.initPd?(this.checkRules={},this.checkRules=o({},this.rules,this.pdRules)):"2"===this.addResourceInfo.initPd&&(this.checkRules={},this.checkRules=o({},this.rules)),this.$refs[e].validate(function(e){if(!e)return!1;console.log("submit"),t.$http({method:"post",url:"/product/v1/resource",data:t.addResourceInfo}).then(function(e){console.log(e),"00"!==e.data.sysTxStatus?t.$message.warning(e.data.sysRespDesc):(t.$refs["addResourceInfo"].resetFields(),t.dialogConfig.visible.addDialog=!1,t.getReList())}).catch(function(e){console.log(e)})}),console.log(this.addResourceInfo)},clearFormRules:function(){this.$refs["addResourceInfo"].resetFields(),this.dialogConfig.visible.addDialog=!1},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件")},resSucc:function(e,t){this.addResourceInfo.resRte=t.name},beforeAvatarUpload:function(e){var t="application/pdf"===e.type,s="text/html"===e.type,a=e.size/1024/1024<5;return t||s||this.$message.error("上传的文件只能是 PDF或 html 格式!"),a||this.$message.error("上传文件大小不能超过 5MB!"),(t||s)&&a},selectResource:function(e){var t=this;this.selectReId=[],console.log(e),e.map(function(s){t.selectReId=e})},handleSelectionChange:function(e){var t=this;this.selectReId=[],e.map(function(e){t.selectReId.push(e.resId)})},logoSucc:function(e,t){console.log(t),this.imageUrl=URL.createObjectURL(t.raw)},pdSucc:function(e,t){console.log(t)},beforeAvatarUploadPro:function(e){var t="image/jpeg"===e.type,s="image/png"===e.type,a=e.size/1024/1024<2;return t||s||this.$message.error("上传头像图片只能是 JPG或者PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},modifyRe:function(){this.selectReId.length>1?this.$message.warning("限制选择 1 个资源进行修改"):0==this.selectReId.length?this.$message.warning("请选择需要修改的资源"):(this.dialogConfig.visible.modifyDialog=!0,this.modifyReInfo.resNm=this.selectReId[0].resNm,this.modifyReInfo.resDsc=this.selectReId[0].resDsc,this.modifyReInfo.resTpId=this.selectReId[0].resTpId,this.modifyReInfo.stmId=this.selectReId[0].stmId,this.modifyReInfo.resOptp=this.selectReId[0].resOptp,this.modifyReInfo.avlSt=this.selectReId[0].avlSt,console.log(this.selectReId))},confirmEdit:function(e){var t=this;this.modifyReInfo.authRscId=this.selectReId[0].authRscId,this.$refs[e].validate(function(e){if(!e)return!1;console.log("submit"),t.$http({method:"PATCH",url:"product/v1/resources/"+t.selectReId[0].resId,data:t.modifyReInfo}).then(function(e){console.log(e),"00"===e.data.sysTxStatus?(t.$message.success("资源更新成功"),t.dialogConfig.visible.modifyDialog=!1,t.getReList()):t.$message.warning(e.data.sysRespDesc)}).catch(function(e){console.log(e)})})},deleteRe:function(){0==this.selectReId.length?this.$message.warning("请选择需要删除的资源"):this.selectReId.length>1?this.$message.warning("请选择一个资源进行删除"):this.dialogConfig.visible.deleteDialog=!0},confirmDelete:function(){var e=this;this.$http({method:"DELETE",url:"product/v1/resources/"+this.selectReId[0].resId+"/"+this.selectReId[0].authRscId}).then(function(t){console.log(t),"00"===t.data.sysTxStatus?(e.dialogConfig.visible.deleteDialog=!1,e.$message.success("资源删除成功"),e.getReList()):e.$message.warning(t.data.sysRespDesc)}).catch(function(e){console.log(e)})},getReDetail:function(){var e=this;this.$http({method:"GET",url:"product/v1/resources/"+this.selectReId[0].resId}).then(function(t){console.log(t),e.reDetail=[],e.reDetail.push(t.data.data)}).catch(function(e){console.log(e)})},showDetail:function(){0==this.selectReId.length?this.$message.warning("请选择需要查看的具体资源"):this.selectReId.length>1?this.$message.warning("限制选择 1 个资源查看详情"):(this.dialogConfig.visible.detailDialog=!0,this.getReDetail())},rePeriod:function(){console.log("查看生命周期"),this.dialogConfig.visible.periodDialog=!0},closePeriod:function(){this.dialogConfig.visible.periodDialog=!1},showIns:function(){this.selectReId.length>1?this.$message.warning("限制选择 1 个资源"):0==this.selectReId.length?this.$message.warning("请选择需要查看的资源"):(console.log("查看使用说明"),window.open("@/assets/index.html"))},getReList:function(){var e=this;this.loading=!0,this.$http({method:"get",url:"/product/v1/resources",params:this.searchConfig}).then(function(t){console.log(t),e.tableConfig.tableData=t.data.data.list,e.paginatioinConfig.total=t.data.data.total,"00"===t.data.sysTxStatus?e.loading=!1:(e.$message.warning(t.data.sysRespDesc),e.loading=!1)}).catch(function(t){console.log(t),e.$message.error("系统异常，请稍后再试"),e.loading=!1})}},created:function(){this.getReList(),this.checkRules=o({},this.rules)},filters:{resTpIdFilter:function(e){switch(e){case"1":return"页面级资源";case"2":return"外设资源";case"3":return"静态资源";case"4":return"REST资源";case"5":return"其他"}},stmIdFilter:function(e){switch(e){case"1":return"智能设备云";case"2":return"双录云"}},avlStFilter:function(e){switch(e){case"1":return"可用";case"2":return"不可用"}},resDscFilter:function(e){switch(e){case null:return"暂无资源描述";case e:return e}}}},n=r,c=(s("f881"),s("210c"),s("048f")),d=Object(c["a"])(n,a,l,!1,null,"0ac190a1",null);d.options.__file="index.vue";t["default"]=d.exports},f121:function(e,t,s){"use strict";s.d(t,"a",function(){return a}),s.d(t,"b",function(){return l});s("ff66"),s("ea23"),s("dbff");var a="/home/ap/nas/iequip/",l=["IEQUIPOPM00000000001","IEQUIPOPM00000000002","IEQUIPOPM00000000003"]},f881:function(e,t,s){"use strict";var a=s("06d0"),l=s.n(a);l.a}}]);
//# sourceMappingURL=resourceMaintenance.8da08462.js.map