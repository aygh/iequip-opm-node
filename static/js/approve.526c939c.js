(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["approve"],{"10be":function(t,e,a){},"224e":function(t,e,a){"use strict";a("822e");var n=a("f57d"),i=a("a0dc"),o=a("3f16"),s=a("f1e5"),r=a("20a7"),l=a("8166"),c=r("species"),u=!o(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,e,a){var p=r(t),f=!o(function(){var e={};return e[p]=function(){return 7},7!=""[t](e)}),g=f?!o(function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},"split"===t&&(a.constructor={},a.constructor[c]=function(){return a}),a[p](""),!e}):void 0;if(!f||!g||"replace"===t&&!u||"split"===t&&!d){var h=/./[p],v=a(s,p,""[t],function(t,e,a,n,i){return e.exec===l?f&&!i?{done:!0,value:h.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}}),m=v[0],b=v[1];n(String.prototype,t,m),i(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},3045:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"container"},[a("router-view")],1)},i=[],o={},s=o,r=(a("4062"),a("048f")),l=Object(r["a"])(s,n,i,!1,null,"35b61c1e",null);l.options.__file="index.vue";e["default"]=l.exports},"3bd2":function(t,e,a){"use strict";var n=a("7684"),i=a.n(n);i.a},"3bf0":function(t,e,a){var n=a("2915"),i=a("f1e5");t.exports=function(t){return function(e,a){var o,s,r=String(i(e)),l=n(a),c=r.length;return l<0||l>=c?t?"":void 0:(o=r.charCodeAt(l),o<55296||o>56319||l+1===c||(s=r.charCodeAt(l+1))<56320||s>57343?t?r.charAt(l):o:t?r.slice(l,l+2):s-56320+(o-55296<<10)+65536)}}},4062:function(t,e,a){"use strict";var n=a("803f"),i=a.n(n);i.a},"4a20":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":t.loadingText}},[a("el-header",{staticClass:"my-header publish-header"},[a("section",{staticClass:"section"},[a("span",[t._v("开始时间：")]),a("el-date-picker",{staticClass:"my-date-pic",attrs:{type:"datetime",size:"small",placeholder:"选择开始时间","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.setStartTimeOptions},model:{value:t.searchConfig.beginTms,callback:function(e){t.$set(t.searchConfig,"beginTms",e)},expression:"searchConfig.beginTms"}})],1),a("section",{staticClass:"section"},[a("span",[t._v("结束时间：")]),a("el-date-picker",{staticClass:"my-date-pic",attrs:{type:"datetime",size:"small",placeholder:"选择结束时间","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.setEndTimeOptions},model:{value:t.searchConfig.endTms,callback:function(e){t.$set(t.searchConfig,"endTms",e)},expression:"searchConfig.endTms"}})],1),a("br"),a("section",{staticClass:"section"},[a("span",[t._v("项目名称：")]),a("el-input",{staticClass:"my-input",attrs:{size:"small",placeholder:"请输入项目名称"},model:{value:t.searchConfig.appNm,callback:function(e){t.$set(t.searchConfig,"appNm",e)},expression:"searchConfig.appNm"}})],1),a("section",{staticClass:"section"},[a("span",[t._v("企业名称：")]),a("el-input",{staticClass:"my-input",attrs:{size:"small",placeholder:"请输入机构名称"},model:{value:t.searchConfig.insNm,callback:function(e){t.$set(t.searchConfig,"insNm",e)},expression:"searchConfig.insNm"}})],1),a("section",{staticClass:"section"},[a("span",[t._v("版本状态：")]),a("el-select",{staticClass:"my-select",attrs:{size:"small",placeholder:"请选择审核状态"},model:{value:t.searchConfig.verAuthenSt,callback:function(e){t.$set(t.searchConfig,"verAuthenSt",e)},expression:"searchConfig.verAuthenSt"}},t._l(t.verAuthenStOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("section",{staticClass:"section"},[a("el-button",{attrs:{type:"primary",size:"small",height:"32"},on:{click:t.getData}},[t._v("搜索")])],1)]),a("el-main",{staticStyle:{heigth:"400px",padding:"0 20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableConfig.tableData,"header-row-class-name":t.tableConfig.tableHeaderClass,stripe:""}},[t._l(t.tableConfig.tableHead,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,width:t.width}})}),a("el-table-column",{attrs:{label:"版本状态",prop:"verSt",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:"1"===e.row.verSt?"untreated":"2"===e.row.verSt?"refuse":"pass"},[t._v(t._s(t._f("verStFilter")(e.row.verSt)))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"==e.row.verSt?a("span",{staticClass:"my-handle",on:{click:function(a){t.showDialog(e.row)}}},[a("i",{staticClass:"el-icon-edit"}),t._v("处理")]):a("span",{staticClass:"my-handle",on:{click:function(a){t.showDialog(e.row)}}},[a("i",{staticClass:"el-icon-tickets"}),t._v("详情")])]}}])})],2)],1),a("el-footer",[a("el-pagination",{staticStyle:{width:"600px",margin:"0 auto"},attrs:{"current-page":t.paginatioinConfig.start,"page-sizes":t.paginatioinConfig.sizes,"page-size":t.paginatioinConfig.maxRows,layout:"total, sizes, prev, pager, next, jumper",total:t.paginatioinConfig.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{staticClass:"my-dialog",attrs:{title:"项目发布审批详情",visible:t.dialogConfig.visible},on:{"update:visible":function(e){t.$set(t.dialogConfig,"visible",e)}}},[a("div",{staticClass:"content"},[a("publish-dialog",{attrs:{data:t.dialogConfig.rowInfo}})],1),a("el-dialog",{attrs:{width:"30%",title:"拒绝",visible:t.dialogConfig.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.$set(t.dialogConfig,"innerVisible",e)}}},[a("el-form",{ref:"form",attrs:{model:t.dialogConfig.formData,rules:t.dialogConfig.rules}},[a("el-form-item",{attrs:{label:"拒绝理由",prop:"oprDesc"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请输入拒绝理由"},model:{value:t.dialogConfig.formData.oprDesc,callback:function(e){t.$set(t.dialogConfig.formData,"oprDesc",e)},expression:"dialogConfig.formData.oprDesc"}})],1)],1),a("el-button",{staticClass:"inner-refuse",attrs:{height:"32",size:"small"},on:{click:function(e){t.approve("拒绝")}}},[t._v("确定")])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["1"==t.dialogConfig.row.verSt?a("el-button",{staticClass:"agree",attrs:{height:"32",size:"small"},on:{click:function(e){t.approve("agree")}}},[t._v("同意")]):t._e(),"1"==t.dialogConfig.row.verSt?a("el-button",{staticClass:"refuse",attrs:{height:"32",size:"small"},on:{click:function(e){t.approve("refuse")}}},[t._v("拒绝")]):t._e()],1)],1)],1)},i=[],o=(a("7e96"),a("8383"),a("ff66"),a("ea23"),a("dbff"),a("d722")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"main"},[n("div",{staticClass:"sbjNm"},[n("span",[t._v(t._s(t.data.appNm))]),n("span",{class:"1"==t.data.verSt?"blue":"2"==t.data.verSt?"red":"green"},[t._v(t._s(t._f("verStFilter")(t.data.verSt)))])]),n("div",{staticClass:"entNm"},[n("img",{attrs:{src:a("4b5d"),alt:""}}),n("span",[t._v(t._s(t.data.acctId))]),n("span",[t._v(t._s(t._f("filterTime")(t.data.lclCrtTms)))])]),n("p",{staticStyle:{"border-left":"4px solid #228CDF","text-indent":"3px"}},[t._v("基本信息")]),n("ul",{staticClass:"base-info-list"},[n("li",[n("span",[t._v("机构名称")]),n("span",[t._v(t._s(t.data.insNm))])]),n("li",[n("span",[t._v("项目名称")]),n("span",[t._v(t._s(t.data.appNm))])]),n("li",[n("span",[t._v("项目LOGO")]),n("span",[t._v(t._s(t.data.appLogoSrc))])]),n("li",[n("span",[t._v("项目类型")]),n("span",[t._v(t._s(t._f("appTpFilter")(t.data.appTp)))])]),n("li",[n("span",[t._v("项目简介")]),n("span",[t._v(t._s(t.data.appBrf))])]),n("li",[n("span",[t._v("版本描述")]),n("span",[t._v(t._s(t.data.verDesc))])]),n("li",[n("span",[t._v("版本状态")]),n("span",[t._v(t._s(t._f("verStFilter")(t.data.verSt)))])]),t.data.verStDesc?n("li",[n("span",[t._v("拒绝理由")]),n("span",[t._v(t._s(t.data.verStDesc))])]):t._e(),n("li",[n("span",[t._v("版本号")]),n("span",[t._v(t._s(t.data.version))])]),t.data.appStDesc?n("li",[n("span",[t._v("冻结理由")]),n("span",[t._v(t._s(t.data.appStDesc))])]):t._e(),n("li",[n("span",[t._v("本次上传的代码包")]),n("span",[t._v(t._s(t.data.codeSrc))])]),n("li",[n("span"),n("span",{staticClass:"down",on:{click:function(e){t.downloadCode(t.data.codeSrc)}}},[t._v("代码包下载")])])])])])},r=[],l=a("f121"),c={name:"publishDialog",props:["data"],methods:{downloadCode:function(t){var e=window.location.origin,a="".concat(e,"/download?filePath=").concat(l["a"]).concat(t.replace(/\\/g,"/"));window.open(a)}},filters:{verStFilter:function(t){switch(t){case"1":return"待审核";case"2":return"拒绝";case"3":return"可发布";case"4":return"待生产版本发布";case"5":return"生产版本发布中";case"6":return"生产版本已发布";case"7":return"待灰度版本发布";case"8":return"灰度版本发布中";case"9":return"灰度版本已发布";case"10":return"版本发布失败"}},appTpFilter:function(t){switch(t){case"1":return"报刊杂志";case"2":return"餐饮";case"3":return"社交";case"4":return"摄影"}}}},u=c,d=(a("d099"),a("048f")),p=Object(d["a"])(u,s,r,!1,null,"3fe49196",null);p.options.__file="publish-dialog.vue";var f=p.exports,g=a("65a7"),h={name:"publish",components:{publishDialog:f},data:function(){var t=this;return{searchConfig:{beginTms:"",endTms:"",appNm:"",verAuthenSt:"",insNm:""},verAuthenStOption:[{value:"",label:"全部"},{value:"1",label:"待审核"},{value:"2",label:"拒绝"},{value:"3",label:"可发布"},{value:"4",label:"待生产版本发布"},{value:"5",label:"生产版本发布中"},{value:"6",label:"生产版本已发布"},{value:"7",label:"待灰度版本发布"},{value:"8",label:"灰度版本发布中"},{value:"9",label:"灰度版本已发布"},{value:"10",label:"版本发布失败"}],tableConfig:{tableHead:[{prop:"insNm",label:"企业名称",width:"",align:"center",showOverflowTooltip:!0,fixed:!1},{prop:"lclCrtTms",label:"申请时间",width:"",align:"center",showOverflowTooltip:!0,fixed:!1},{prop:"appNm",label:"项目名称",width:"",align:"center",showOverflowTooltip:!0,fixed:!1},{prop:"version",label:"版本号",width:"",align:"center",showOverflowTooltip:!0,fixed:!1}],tableData:[],tableHeaderClass:"my-table-header"},paginatioinConfig:{total:0,maxRows:10,sizes:[10,20,30],start:1},dialogConfig:{visible:!1,row:"",rowInfo:"",innerVisible:!1,formData:{oprDesc:""},rules:{oprDesc:[{required:!0,message:"请输入冻结理由",trigger:"blur"}]}},loading:!1,loadingText:"拼命加载中...",setStartTimeOptions:{disabledDate:function(e){if(t.searchConfig.endTms){var a=t.searchConfig.endTms.replace(/\-/g,"/");return e.getTime()>new Date(a.slice(0,10)).getTime()||e.getTime()>(new Date).getTime()}return e.getTime()<new Date("1970/01/01 00:00:00")||e.getTime()>(new Date).getTime()}},setEndTimeOptions:{disabledDate:function(e){if(t.searchConfig.beginTms){var a=t.searchConfig.beginTms.replace(/\-/g,"/");return e.getTime()<new Date(a.slice(0,10)).getTime()||e.getTime()>(new Date).getTime()}return e.getTime()<new Date("1970/01/01 00:00:00")||e.getTime()>(new Date).getTime()}}}},methods:{handleSizeChange:function(t){this.paginatioinConfig.maxRows=t,this.getData()},handleCurrentChange:function(t){this.paginatioinConfig.start=t,this.getData()},getData:function(){var t=this,e=this;if(e.searchConfig.beginTms&&e.searchConfig.endTms&&e.searchConfig.endTms<e.searchConfig.beginTms)return this.$message.warning("开始时间不能大于结束时间");this.loading=!0;var a={maxRows:this.paginatioinConfig.maxRows,start:this.paginatioinConfig.start};Object.assign(a,this.searchConfig),a.beginTms=new Date(a.beginTms).getTime(),a.endTms=new Date(a.endTms).getTime(),this.$axios({method:"post",url:o["d"].query,data:a,PBreq:"com.ccb.cloud.protobuf.proto.iequip.SelectParam",PBres:"com.ccb.cloud.protobuf.proto.Page"}).then(function(e){t.loading=!1;var a=e.headers,n=a.SYS_RESP_DESC,i=a.SYS_TX_STATUS;if("00"!=i)return t.$message.error(n);t.paginatioinConfig.total=e.data.total;var o=e.data.data;t.tableConfig.tableData=o.map(function(e){var a=t.$myDecode(e.value,"com.ccb.cloud.protobuf.proto.iequip.AppVer");return a.lclCrtTms=Object(g["filterTime"])(a.lclCrtTms),a})}).catch(function(e){t.loading=!1,console.log(e),"获取不到该用户的信息,当前用户可能未登录"!==e?t.$message.error("系统错误，请稍后再试"):t.$message.error("请登录")})},showDialog:function(t){var e=this;this.dialogConfig.row=t;var a=t.verId;this.getInfoByVerId(a).then(function(t){console.log(t);var a=t.data;e.dialogConfig.rowInfo=a,e.dialogConfig.visible=!0}).catch(function(t){console.log(t)})},getInfoByVerId:function(t){var e=this;return new Promise(function(a,n){e.$axios({method:"get",url:o["d"].getVersion(t),PBres:"com.ccb.cloud.protobuf.proto.iequip.AppVer"}).then(function(t){a(t)}).catch(function(t){n(t)})})},approve:function(t){var e=this,a={verId:this.dialogConfig.row.verId,verSt:this.dialogConfig.row.verSt,oprDesc:""};if("agree"===t)a.oprTp="3";else if("拒绝"==t)a.oprTp="4",a.oprDesc=this.dialogConfig.formData.oprDesc;else if("refuse"==t)return this.dialogConfig.formData.oprDesc="",void(this.dialogConfig.innerVisible=!0);this.handleVers(a).then(function(t){if(console.log(t),"SUCCESS"!=t.data.retRsltDsc)return e.$message.error(t.data.retRsltDsc);e.dialogConfig.innerVisible=!1,e.dialogConfig.visible=!1,e.getData()}).catch(function(t){console.log(t)})},handleVers:function(t){var e=this,a=t.verId,n=t.oprTp,i=t.oprDesc;return new Promise(function(t,s){e.$axios({method:"patch",url:o["d"].handle(a),data:{oprTp:n,oprDesc:i},PBreq:"com.ccb.cloud.protobuf.proto.iequip.VerStParam",PBres:"com.ccb.cloud.protobuf.proto.iequip.RetRslt"}).then(function(e){t(e)}).catch(function(t){s(t)})})}},created:function(){this.getData()},filters:{verStFilter:function(t){switch(t){case"1":return"待审核";case"2":return"拒绝";case"3":return"可发布";case"4":return"待生产版本发布";case"5":return"生产版本发布中";case"6":return"生产版本已发布";case"7":return"待灰度版本发布";case"8":return"灰度版本发布中";case"9":return"灰度版本已发布";case"10":return"版本发布失败"}}}},v=h,m=(a("56c8"),a("c314"),Object(d["a"])(v,n,i,!1,null,"6360a814",null));m.options.__file="publish-approve.vue";e["default"]=m.exports},"4b5d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAaFJREFUSA21lr9ugzAQxmNXoEhUysTWtV1AZeExKnXOG/QdOpRW6tAniQod8wA8AEsGpq7dMiEVCYEU+n00jhoa8oeYkyC2ufudzz6fI0YHJEkSw7Isv65rRwhhUx3tJdppnueJ7/vVPoTo+rhYLK4Mw3gEaAqdSYdeBmezqqpePc/72qUj24NBEMg0TQPTND8Bf9gDp+mEOtSlDW3bvK0IoHQJgxmeu7biMX1EM8czdRznW+lfqAa9u6770RdODmxv8HNr2/Z7HMd1M8YXhSFKKZ9+e+e9V6vVM6IISGmWiBvKdUR/zEENUpRlec2NbzaF2QKoLjjnN14zR2Kd50sMdqUiDfpIhnNiSx4iWOuGc0ITsiXSyukzvWNsyJZIreb4H2Nwqg7Z/07eqZBD+lwibvAgQjaXKB2EDijZkiUX7WwAJ0zTRLKeI5SZbgdkkt1sMus5HBQanRRr5qhxwJqBAvWmywFZ6gLapGkURS8Ia36uEzLIUpzBL5xNBPTImygMw3vWc3RP2ZOCNrT9e5uRuRUBB5TouvQ7HShH5/5t+QFvO9MRfvhHvwAAAABJRU5ErkJggg=="},"4f8b":function(t,e,a){},"56c8":function(t,e,a){"use strict";var n=a("fde0"),i=a.n(n);i.a},7684:function(t,e,a){},"803f":function(t,e,a){},8166:function(t,e,a){"use strict";var n=a("508a"),i=RegExp.prototype.exec,o=String.prototype.replace,s=i,r="lastIndex",l=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[r]||0!==e[r]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(s=function(t){var e,a,s,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",n.call(d))),l&&(e=d[r]),s=i.call(d,t),l&&s&&(d[r]=d.global?s.index+s[0].length:e),c&&s&&s.length>1&&o.call(s[0],a,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(s[u]=void 0)}),s}),t.exports=s},"822e":function(t,e,a){"use strict";var n=a("8166");a("a345")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},8383:function(t,e,a){"use strict";var n=a("2724"),i=a("31e8"),o=a("c2ce"),s=a("2915"),r=a("c576"),l=a("e76c"),c=Math.max,u=Math.min,d=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};a("224e")("replace",2,function(t,e,a,h){return[function(n,i){var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,i):a.call(String(o),n,i)},function(t,e){var i=h(a,t,this,e);if(i.done)return i.value;var d=n(t),p=String(this),f="function"===typeof e;f||(e=String(e));var m=d.global;if(m){var b=d.unicode;d.lastIndex=0}var C=[];while(1){var _=l(d,p);if(null===_)break;if(C.push(_),!m)break;var w=String(_[0]);""===w&&(d.lastIndex=r(p,o(d.lastIndex),b))}for(var S="",T=0,x=0;x<C.length;x++){_=C[x];for(var y=String(_[0]),A=c(u(s(_.index),p.length),0),D=[],q=1;q<_.length;q++)D.push(g(_[q]));var k=_.groups;if(f){var R=[y].concat(D,A,p);void 0!==k&&R.push(k);var E=String(e.apply(void 0,R))}else E=v(y,p,A,D,k,e);A>=T&&(S+=p.slice(T,A)+E,T=A+y.length)}return S+p.slice(T)}];function v(t,e,n,o,s,r){var l=n+t.length,c=o.length,u=f;return void 0!==s&&(s=i(s),u=p),a.call(r,u,function(a,i){var r;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(l);case"<":r=s[i.slice(1,-1)];break;default:var u=+i;if(0===u)return i;if(u>c){var p=d(u/10);return 0===p?i:p<=c?void 0===o[p-1]?i.charAt(1):o[p-1]+i.charAt(1):i}r=o[u-1]}return void 0===r?"":r})}})},bec8:function(t,e,a){"use strict";var n=a("ec69"),i=a.n(n);i.a},c314:function(t,e,a){"use strict";var n=a("4f8b"),i=a.n(n);i.a},c576:function(t,e,a){"use strict";var n=a("3bf0")(!0);t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},d099:function(t,e,a){"use strict";var n=a("ea96"),i=a.n(n);i.a},d342:function(t,e,a){"use strict";var n=a("10be"),i=a.n(n);i.a},d722:function(t,e,a){"use strict";a.d(e,"e",function(){return n}),a.d(e,"f",function(){return i}),a.d(e,"a",function(){return o}),a.d(e,"d",function(){return s}),a.d(e,"c",function(){return r}),a.d(e,"b",function(){return l});var n={queryEntity:"/iequip/v1/portal/realNmAudits/queryEntity",rlnmAdtIdGet:function(t){return"/iequip/v1/portal/realNmAudits/".concat(t)},rlnmAuthenStPatch:function(t){return"/iequip/v1/portal/realNmAudits/".concat(t,"/rlnmAuthenSt")}},i={register:"/iequip/v1/portal/accounts",resetPWD:"/iequip/v1/portal/accounts/credential"},o={add:"/iequip/v1/portal/docs",deleteDoc:function(t){return"/iequip/v1/portal/docs/".concat(t)},editDoc:function(t){return"/iequip/v1/portal/docs/".concat(t)},query:"/iequip/v1/portal/docs/docBlngSbj/iequip",editQuery:function(t){return"/iequip/v1/portal/docs/".concat(t)}},s={query:"/iequip/v1/portal/vers/queryEntity",getVersion:function(t){return"/iequip/v1/portal/vers/".concat(t)},subApprove:function(t){return"/iequip/v1/portal/apps/".concat(t,"/vers")},getListById:function(t){return"/iequip/v1/portal/apps/".concat(t,"/vers")},handle:function(t){return"/iequip/v1/portal/vers/".concat(t,"/verSt")},queryActions:function(t){return"/iequip/v1/portal/vers/".concat(t,"/actions")}},r={query:"/iequip/v1/portal/apps/queryEntity",updateStatus:function(t,e){return"/iequip/v1/portal/apps/".concat(t,"/").concat(e)},editQuery:function(t){return"/iequip/v1/portal/apps/".concat(t)},deletePro:function(t){return"/iequip/v1/portal/apps/".concat(t)},editPro:function(t){return"/iequip/v1/portal/apps/".concat(t)}},l={queryType:function(t){return"/iequip/v1/portal/typeinfo/".concat(t)},add:"/product/v1/product",specify:function(t){return"/product/v1/products/".concat(t)},query:"/product/v1/products",edit:function(t){return"/product/v1/products/".concat(t)},deletePro:function(t,e){return"/product/v1/products/".concat(t,"/").concat(e)},bindResource:function(t){return"/product/v1/products/".concat(t,"/bind")}}},e76c:function(t,e,a){"use strict";var n=a("0c62"),i=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var o=a.call(t,e);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},ea96:function(t,e,a){},ec69:function(t,e,a){},f09c:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":t.loadingText}},[a("el-header",{staticClass:"my-header"},[a("section",{staticClass:"section"},[a("span",[t._v("申请时间：")]),a("el-date-picker",{staticClass:"my-date-pic",attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.setStartTimeOptions,placeholder:"选择申请时间"},model:{value:t.searchConfig.lclCrdTms,callback:function(e){t.$set(t.searchConfig,"lclCrdTms",e)},expression:"searchConfig.lclCrdTms"}})],1),a("section",{staticClass:"section"},[a("span",[t._v("处理时间：")]),a("el-date-picker",{staticClass:"my-date-pic",attrs:{type:"datetime",size:"small","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.setEndTimeOptions,placeholder:"选择处理时间"},model:{value:t.searchConfig.adtTms,callback:function(e){t.$set(t.searchConfig,"adtTms",e)},expression:"searchConfig.adtTms"}})],1),a("br"),a("section",{staticClass:"section"},[a("span",[t._v("企业名称：")]),a("el-input",{staticClass:"my-input enterprise-name",attrs:{placeholder:"请输入企业名称"},model:{value:t.searchConfig.sbjNm,callback:function(e){t.$set(t.searchConfig,"sbjNm",e)},expression:"searchConfig.sbjNm"}})],1),a("section",{staticClass:"section"},[a("span",[t._v("请求状态：")]),a("el-select",{staticClass:"my-select",attrs:{size:"small",placeholder:"请选择请求状态"},model:{value:t.searchConfig.rlnmAuthenSt,callback:function(e){t.$set(t.searchConfig,"rlnmAuthenSt",e)},expression:"searchConfig.rlnmAuthenSt"}},t._l(t.rlnmAuthenStOption,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),a("section",{staticClass:"section"},[a("el-button",{attrs:{type:"primary",size:"small",height:"32"},on:{click:t.getData}},[t._v("搜索")])],1)]),a("el-main",{staticStyle:{heigth:"400px",padding:"0 20px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableConfig.tableData,"header-row-class-name":t.tableConfig.tableHeaderClass,stripe:""}},[t._l(t.tableConfig.tableHead,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,width:t.width}})}),a("el-table-column",{attrs:{label:"处理状态",prop:"status",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:"1"===e.row.rlnmAuthenSt?"pass":"2"===e.row.rlnmAuthenSt?"refuse":"untreated"},[t._v(t._s(t._f("rlnmAuthenStFilter")(e.row.rlnmAuthenSt)))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.rlnmAuthenSt?a("span",{staticClass:"my-handle",on:{click:function(a){t.showDialog(e.row)}}},[a("i",{staticClass:"el-icon-edit"}),t._v("处理")]):a("span",{staticClass:"my-handle",on:{click:function(a){t.showDialog(e.row)}}},[a("i",{staticClass:"el-icon-tickets"}),t._v("详情")])]}}])})],2)],1),a("el-footer",[a("el-pagination",{staticStyle:{width:"600px",margin:"0 auto"},attrs:{"current-page":t.paginatioinConfig.start,"page-sizes":t.paginatioinConfig.sizes,"page-size":t.paginatioinConfig.maxRows,layout:"total, sizes, prev, pager, next, jumper",total:t.paginatioinConfig.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),a("el-dialog",{staticClass:"my-dialog",attrs:{title:"实名认证申请详情",visible:t.dialogConfig.visible},on:{"update:visible":function(e){t.$set(t.dialogConfig,"visible",e)}}},[a("div",{staticClass:"content"},[a("realName-dialog",{attrs:{data:t.dialogConfig.rowInfo}})],1),a("el-dialog",{attrs:{width:"30%",title:"拒绝",visible:t.dialogConfig.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.$set(t.dialogConfig,"innerVisible",e)}}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},placeholder:"请输入拒绝理由"},model:{value:t.dialogConfig.rlnmAuthenMsg,callback:function(e){t.$set(t.dialogConfig,"rlnmAuthenMsg",e)},expression:"dialogConfig.rlnmAuthenMsg"}}),a("el-button",{staticClass:"refuse",on:{click:function(e){t.approve("3")}}},[t._v("拒绝")])],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.dialogConfig.row&&"0"==t.dialogConfig.row.rlnmAuthenSt?a("el-button",{staticClass:"agree",on:{click:function(e){t.approve("1")}}},[t._v("同意")]):t._e(),t.dialogConfig.row&&"0"==t.dialogConfig.row.rlnmAuthenSt?a("el-button",{staticClass:"refuse",on:{click:function(e){t.approve("2")}}},[t._v("拒绝")]):a("el-button",{staticClass:"sure",on:{click:function(e){t.dialogConfig.visible=!1}}},[t._v("确定")])],1)],1)],1)},i=[],o=(a("7e96"),a("eee6"),a("8383"),a("ff66"),a("ea23"),a("dbff"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"main"},[n("div",{staticClass:"sbjNm"},[n("span",[t._v(t._s(t.data.entNm))]),n("span",{class:"0"==t.data.rlnmAuthenSt?"blue":"1"==t.data.rlnmAuthenSt?"green":"red"},[t._v(t._s(t._f("rlnmAuthenStFilter")(t.data.rlnmAuthenSt)))])]),n("div",{staticClass:"entNm"},[n("img",{attrs:{src:a("4b5d"),alt:""}}),n("span",[t._v(t._s(t.data.acctId))]),n("span",[t._v(t._s(t.data.adtTms))])]),n("p",{staticStyle:{"border-left":"4px solid #228CDF","text-indent":"3px"}},[t._v("基本信息")]),n("ul",{staticClass:"base-info-list"},[n("li",[n("span",[t._v("申请人身份")]),n("span",[t._v(t._s(t.data.acctTp))])]),n("li",[n("span",[t._v("企业名称")]),n("span",[t._v(t._s(t.data.entNm))])]),t._m(0),n("li",[n("span",[t._v(t._s(t.data.acctTp)+"手机")]),n("span",[t._v(t._s(t.data.authenPhone))])]),"经办人"==t.data.acctTp?n("li",[n("span",[t._v("经办人")]),n("span",[t._v(t._s(t.data.rspbpsnNm))])]):t._e(),"经办人"==t.data.acctTp?n("li",[n("span",[t._v("经办人身份证号")]),n("span",[t._v(t._s(t.data.rspbpsnCrdtNo))])]):n("li",[n("span",[t._v(t._s(t.data.acctTp)+"身份证号")]),n("img",{attrs:{src:"",alt:""}}),n("span",[t._v(t._s(t.data.sbjCrdtNo))])]),t.data.rlnmAuthenMsg?n("li",[n("span",[t._v("拒绝理由")]),n("span",[t._v(t._s(t.data.rlnmAuthenMsg))])]):t._e(),n("li",{staticClass:"photo"},[n("span",[t._v(t._s(t.data.acctTp)+"身份证正面照片")]),n("img",{attrs:{src:"/getFile?filePath="+t.filePath+t.data.authenFrontSrc.replace(/\\/g,"/"),alt:""}})]),n("li",{staticClass:"photo"},[n("span",[t._v(t._s(t.data.acctTp)+"身份证反面照片")]),n("img",{attrs:{src:"/getFile?filePath="+t.filePath+t.data.authenBackSrc.replace(/\\/g,"/"),alt:""}})]),n("li",{staticClass:"photo"},[n("span",[t._v(t._s(t.data.acctTp)+"手持身份证照片")]),n("img",{attrs:{src:"/getFile?filePath="+t.filePath+t.data.authenHandSrc.replace(/\\/g,"/"),alt:""}})]),n("li",{staticClass:"photo"},[n("span",[t._v("企业证件照片")]),n("img",{attrs:{src:"/getFile?filePath="+t.filePath+t.data.entCrdtSrc.replace(/\\/g,"/"),alt:""}})]),n("li",[n("span",{staticStyle:{width:"116px","margin-right":"48px"}},[t._v("统一社会信用代码")]),n("span",[t._v(t._s(t.data.unnSocCrCd))])])])])])}),s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("span",[t._v("企业法定代表人")]),a("span",[t._v("法定代表人")])])}],r=a("f121"),l={name:"realNameDialog",props:["data"],data:function(){return{filePath:r["a"]}},filters:{rlnmAuthenStFilter:function(t){return"0"==t?"未处理":"1"==t?"已通过":"2"==t?"已拒绝":void 0}}},c=l,u=(a("3bd2"),a("048f")),d=Object(u["a"])(c,o,s,!1,null,"4874f3d6",null);d.options.__file="realname-dialog.vue";var p=d.exports,f=a("d722"),g={name:"realName",components:{realNameDialog:p},data:function(){var t=this;return{searchConfig:{rlnmAuthenSt:"",lclCrdTms:"",adtTms:"",sbjNm:""},sbjNmOptioin:[],rlnmAuthenStOption:[{value:"",label:"全部"},{value:"0",label:"未处理"},{value:"1",label:"已通过"},{value:"2",label:"已拒绝"}],tableConfig:{tableHead:[{prop:"acctId",label:"申请人账号",width:"",align:"center",showOverflowTooltip:!0,fixed:!1},{prop:"entNm",label:"企业名称",width:"",align:"center",showOverflowTooltip:!0,fixed:!1},{prop:"adtTms",label:"申请时间",width:"",align:"center",showOverflowTooltip:!0,fixed:!1},{prop:"acctTp",label:"申请人身份类型",width:"",align:"center",showOverflowTooltip:!0,fixed:!1}],tableData:[],tableHeaderClass:"my-table-header"},paginatioinConfig:{total:0,maxRows:10,sizes:[10,20,30],start:1},dialogConfig:{row:null,rowInfo:null,visible:!1,innerVisible:!1,rlnmAuthenMsg:""},loading:!1,loadingText:"拼命加载中...",setStartTimeOptions:{disabledDate:function(e){if(t.searchConfig.adtTms){var a=t.searchConfig.adtTms.replace(/\-/g,"/");return e.getTime()>new Date(a.slice(0,10)).getTime()||e.getTime()>(new Date).getTime()}return e.getTime()<new Date("1970/01/01 00:00:00")||e.getTime()>(new Date).getTime()}},setEndTimeOptions:{disabledDate:function(e){if(t.searchConfig.lclCrdTms){var a=t.searchConfig.lclCrdTms.replace(/\-/g,"/");return e.getTime()<new Date(a.slice(0,10)).getTime()||e.getTime()>(new Date).getTime()}return e.getTime()<new Date("1970/01/01 00:00:00")||e.getTime()>(new Date).getTime()}}}},methods:{getData:function(){var t=this;if(this.searchConfig.lclCrdTms&&this.searchConfig.adtTms&&this.searchConfig.lclCrdTms>this.searchConfig.adtTms)return this.$message.warning("申请时间不能大于处理时间");this.loading=!0;var e={};for(var a in this.searchConfig)e[a]=this.searchConfig[a];e.start=this.paginatioinConfig.start.toString(),e.maxRows=this.paginatioinConfig.maxRows.toString(),this.$axios({method:"post",url:f["e"].queryEntity,data:e,PBreq:"com.ccb.cloud.protobuf.proto.iequip.ConditionQuery",PBres:"com.ccb.cloud.protobuf.proto.Page",headers:{"Content-type":"application/x-protobuf","X-Requested-With":"XMLHttpRequest"}}).then(function(e){if(t.loading=!1,"00"!=e.headers.SYS_TX_STATUS)return t.$message.error(e.headers.SYS_RESP_DESC);t.paginatioinConfig.total=e.data.total;var a=e.data.data;t.tableConfig.tableData=a.map(function(e){return t.$myDecode(e.value,"com.ccb.cloud.protobuf.proto.iequip.AcctRlnm")})}).catch(function(e){t.loading=!1,console.log(e),t.$message.error("系统异常，请稍后再试")})},handleSizeChange:function(t){this.paginatioinConfig.maxRows=t,this.getData()},handleCurrentChange:function(t){this.paginatioinConfig.start=t,this.getData()},showDialog:function(t){var e=this;this.dialogConfig.row=t;var a=t.rlnmAdtId;this.$axios({method:"get",url:f["e"].rlnmAdtIdGet(a),PBres:"com.ccb.cloud.protobuf.proto.iequip.AcctRlnm"}).then(function(t){if(console.log(t),"00"!=t.headers.SYS_TX_STATUS)return e.$message.error(t.headers.SYS_RESP_DESC);e.dialogConfig.visible=!0,e.dialogConfig.rowInfo=t.data}).catch(function(t){e.loading=!1,console.log(t),e.$message.error("系统异常，请稍后再试")})},approve:function(t){var e=this,a=this.dialogConfig.row.rlnmAdtId,n=Object.assign({},this.dialogConfig.rowInfo);if(n.rlnmAuthenSt=t,"2"===t)return this.dialogConfig.rlnmAuthenMsg="",void(this.dialogConfig.innerVisible=!0);if("3"===t){var i=this.dialogConfig.rlnmAuthenMsg.trim();if(!i)return this.$message.warning("请输入拒绝理由");n.rlnmAuthenMsg=this.dialogConfig.rlnmAuthenMsg,n.rlnmAuthenSt="2"}this.$axios({method:"patch",url:f["e"].rlnmAuthenStPatch(a),data:n,PBreq:"com.ccb.cloud.protobuf.proto.iequip.AcctRlnm"}).then(function(t){if(e.dialogConfig.innerVisible=!1,e.dialogConfig.visible=!1,"00"!=t.headers.SYS_TX_STATUS)return e.$message.error(t.headers.SYS_RESP_DESC);e.getData()}).catch(function(t){console.log(t),e.$message.error("系统异常，请稍后再试")})},closeDialog:function(){this.dialogConfig.visible=!1},init:function(){this.getData()}},created:function(){this.init()},filters:{rlnmAuthenStFilter:function(t){switch(t){case"1":return"已通过";case"2":return"已拒绝";case"0":return"未处理"}return"未处理"}}},h=g,v=(a("bec8"),a("d342"),Object(u["a"])(h,n,i,!1,null,"0f331770",null));v.options.__file="realName-approve.vue";e["default"]=v.exports},f121:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});a("ff66"),a("ea23"),a("dbff");var n="/home/ap/nas/iequip/",i=["IEQUIPOPM00000000001","IEQUIPOPM00000000002","IEQUIPOPM00000000003"]},fde0:function(t,e,a){}}]);
//# sourceMappingURL=approve.526c939c.js.map