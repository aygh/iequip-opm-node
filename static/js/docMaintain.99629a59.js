(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["docMaintain"],{"224e":function(t,e,n){"use strict";n("822e");var o=n("f57d"),i=n("a0dc"),a=n("3f16"),r=n("f1e5"),c=n("20a7"),s=n("8166"),l=c("species"),u=!a(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var f=c(t),p=!a(function(){var e={};return e[f]=function(){return 7},7!=""[t](e)}),g=p?!a(function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[l]=function(){return n}),n[f](""),!e}):void 0;if(!p||!g||"replace"===t&&!u||"split"===t&&!d){var h=/./[f],v=n(r,f,""[t],function(t,e,n,o,i){return e.exec===s?p&&!i?{done:!0,value:h.call(e,n,o)}:{done:!0,value:t.call(n,e,o)}:{done:!1}}),m=v[0],b=v[1];o(String.prototype,t,m),i(RegExp.prototype,f,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}}},"3bf0":function(t,e,n){var o=n("2915"),i=n("f1e5");t.exports=function(t){return function(e,n){var a,r,c=String(i(e)),s=o(n),l=c.length;return s<0||s>=l?t?"":void 0:(a=c.charCodeAt(s),a<55296||a>56319||s+1===l||(r=c.charCodeAt(s+1))<56320||r>57343?t?c.charAt(s):a:t?c.slice(s,s+2):r-56320+(a-55296<<10)+65536)}}},4039:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container",attrs:{"element-loading-text":t.loadingText}},[n("el-header",[n("el-button",{staticClass:"header-btn",attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(e){t.showDialog("add")}}},[t._v("新增文档")])],1),n("el-main",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableConfig.tableData,"header-row-class-name":t.tableConfig.tableHeaderClass,stripe:""}},[t._l(t.tableConfig.tableHead,function(t,e){return n("el-table-column",{key:e,attrs:{prop:t.prop,label:t.label,width:t.width}})}),n("el-table-column",{attrs:{prop:"docTp",label:"文档类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("filterTp")(e.row.docTp)))])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"handle-font",attrs:{title:"编辑"},on:{click:function(n){t.showDialog("edit",e.row)}}},[n("i",{staticClass:"el-icon-edit"})]),n("span",{staticClass:"handle-font",attrs:{title:"下载"},on:{click:function(n){t.downDoc(e.row)}}},[n("i",{staticClass:"el-icon-download"})]),n("span",{staticClass:"handle-font",attrs:{title:"删除"},on:{click:function(n){t.deleteDoc(e.row)}}},[n("i",{staticClass:"el-icon-delete"})])]}}])})],2)],1),n("el-footer",[n("el-pagination",{staticStyle:{width:"600px",margin:"0 auto"},attrs:{"current-page":t.paginatioinConfig.start,"page-sizes":t.paginatioinConfig.sizes,"page-size":t.paginatioinConfig.maxRows,layout:"total, sizes, prev, pager, next, jumper",total:t.paginatioinConfig.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),n("el-dialog",{staticClass:"my-dialog",attrs:{title:t.dialogTitle,visible:t.dialogConfig.visible,width:"40%",center:""},on:{"update:visible":function(e){t.$set(t.dialogConfig,"visible",e)}}},[n("el-main",{staticClass:"my-dialog-main"},[n("section",[n("span",{staticClass:"lf"},[t._v("文档类型")]),n("el-select",{staticClass:"my-dialog-select",attrs:{placeholder:"请选择文档类型"},model:{value:t.dialogConfig.docTp,callback:function(e){t.$set(t.dialogConfig,"docTp",e)},expression:"dialogConfig.docTp"}},t._l(t.docTpOptions,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),n("section",[n("span",{staticClass:"lf"},[t._v("文档名称")]),n("el-input",{attrs:{placeholder:"请输入文档名称"},model:{value:t.dialogConfig.docNm,callback:function(e){t.$set(t.dialogConfig,"docNm",e)},expression:"dialogConfig.docNm"}})],1),n("section",[n("span",{staticClass:"lf"},[t._v("文档简介")]),n("el-input",{attrs:{type:"textarea",placeholder:"请输入文档简介",autosize:{minRows:2,maxRows:6}},model:{value:t.dialogConfig.docBrf,callback:function(e){t.$set(t.dialogConfig,"docBrf",e)},expression:"dialogConfig.docBrf"}})],1),n("section",[n("span",{staticClass:"lf"},[t._v("上传文档")]),n("el-upload",{staticClass:"upload-demo",attrs:{action:t.action,limit:1,"on-exceed":t.exceed,"http-request":t.myUpload,"before-upload":t.beforeUpload,"file-list":t.dialogConfig.fileList}},[n("el-button",{staticClass:"header-btn",attrs:{icon:"el-icon-plus"}},[t._v("新增文档")])],1)],1)]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.addAndEdit}},[t._v("确 定")]),n("el-button",{on:{click:function(e){t.dialogConfig.visible=!1}}},[t._v("取 消")])],1)],1)],1)},i=[],a=(n("c839"),n("8383"),n("eee6"),n("ff66"),n("ea23"),n("dbff"),n("d722")),r=(n("4f45"),n("f121")),c={data:function(){return{tableConfig:{tableHead:[{prop:"docNm",label:"名称",width:"",align:"center",showOverflowTooltip:!0,fixed:!1},{prop:"mntPsnNm",label:"上传者",width:"",align:"center",showOverflowTooltip:!0,fixed:!1},{prop:"mntTms",label:"上传时间",width:"",align:"center",showOverflowTooltip:!0,fixed:!1}],tableData:[],tableHeaderClass:"my-table-header"},paginatioinConfig:{total:0,maxRows:10,sizes:[10,20,30],start:1},dialogTitle:"",dialogConfig:{visible:!1,fileList:[],docNm:"",docBrf:"",docSrc:"",docTp:"",docTpCopy:""},docTpOptions:[{value:"1",label:"操作指南"},{value:"2",label:"开发支持"},{value:"3",label:"上线问题"}],isEdit:!1,editDocId:null,loading:!1,loadingText:"拼命加载中...",action:"/upload?savePath=doc/".concat(sessionStorage.userId,"/")}},methods:{getData:function(){var t=this;this.loading=!0,this.$axios({url:a["a"].query,method:"post",data:{pageSize:this.paginatioinConfig.maxRows.toString(),pageNum:this.paginatioinConfig.start.toString()},PBreq:"com.ccb.cloud.protobuf.proto.iequip.Doc",PBres:"com.ccb.cloud.protobuf.proto.Page"}).then(function(e){if(t.loading=!1,"00"!=e.headers.SYS_TX_STATUS)return t.$message.error(e.headers.SYS_RESP_DESC);t.paginatioinConfig.total=e.data.total;var n=e.data.data;t.tableConfig.tableData=n.map(function(e){return t.$myDecode(e.value,"com.ccb.cloud.protobuf.proto.iequip.Doc")}),console.log(t.tableConfig.tableData)}).catch(function(e){t.loading=!1,t.$message.error("系统错误，请稍后再试")})},handleSizeChange:function(t){this.paginatioinConfig.maxRows=t,this.getData()},handleCurrentChange:function(t){this.paginatioinConfig.start=t,this.getData()},showDialog:function(t,e){var n=this;for(var o in this.isEdit="edit"===t,this.dialogTitle="edit"===t?"编辑文档":"新增文档",this.dialogConfig)this.dialogConfig[o]="fileList"!=o?"visible"===o||"":[];if(e){var i=e.docId;this.editDocId=i,this.editQuery(i).then(function(t){if("00"!=t.headers.SYS_TX_STATUS)return n.$message.error(t.headers.SYS_RESP_DESC);var e=t.data;console.log(e),n.dialogConfig.docNm=e.docNm,n.dialogConfig.docBrf=e.docBrf,n.dialogConfig.docSrc=e.docSrc,n.dialogConfig.docTp=e.docTp}).catch(function(t){n.$message.error("系统异常，请稍后再试")})}},addAndEdit:function(){var t=this;return this.dialogConfig.docTp?this.dialogConfig.docNm.trim()?this.dialogConfig.docBrf.trim()?this.dialogConfig.docSrc?void(this.isEdit?this.edit().then(function(e){t.$message.success("编辑文档成功"),t.dialogConfig.visible=!1,t.getData()}).catch(function(e){t.$message.success("系统异常，请稍后再试")}):this.addDoc().then(function(e){if("00"!=e.headers.SYS_TX_STATUS)return t.$message.error(e.headers.SYS_RESP_DESC);t.getData(),t.$message.success("新增成功"),t.dialogConfig.visible=!1}).catch(function(e){t.$message.error("系统异常，请稍后再试")})):this.$message.warning("上传文档不能为空"):this.$message.warning("文档简介不能为空"):this.$message.warning("文档名称不能为空"):this.$message.warning("请选择文档类型")},addDoc:function(){var t=this,e=this.dialogConfig,n=e.docNm,o=e.docBrf,i=e.docSrc,r=e.docTp;return t.$axios({method:"post",url:a["a"].add,data:{docNm:n,docBrf:o,docSrc:i,docTp:r,docBlngSbj:"1"},PBreq:"com.ccb.cloud.protobuf.proto.iequip.Doc"})},editQuery:function(t){return this.$axios({method:"get",url:a["a"].editQuery(t),PBreq:"com.ccb.cloud.protobuf.proto.iequip.Doc",PBres:"com.ccb.cloud.protobuf.proto.iequip.Doc"})},edit:function(){var t=this;return t.$axios({method:"patch",url:a["a"].editDoc(t.editDocId),data:{docTp:t.dialogConfig.docTp,docNm:t.dialogConfig.docNm,docBrf:t.dialogConfig.docBrf,docSrc:t.dialogConfig.docSrc},PBreq:"com.ccb.cloud.protobuf.proto.iequip.Doc"})},downDoc:function(t){var e=window.location.origin,n="".concat(e,"/download?filePath=").concat(r["a"]).concat(t.docSrc.replace(/\\/g,"/"));window.open(n)},deleteDoc:function(t){var e=this,n=t.docId;this.$confirm("此操作将永久删除该文档, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios({method:"delete",url:a["a"].deleteDoc(n)}).then(function(t){if("00"!=t.headers.SYS_TX_STATUS)return e.$message.error(t.headers.SYS_RESP_DESC);e.$message({type:"success",message:"删除成功!"}),e.getData()}).catch(function(t){e.$message.error("系统异常，请稍后再试")})})},myUpload:function(t){var e=this,n=new FormData;n.append("file",t.file),n.append("fileName",(new Date).getTime()+t.file.name),this.$http({method:"post",url:"/upload?savePath=doc/".concat(sessionStorage.userId,"/"),data:n}).then(function(t){console.log(t),e.dialogConfig.docSrc=t.data.path,e.$message.success("上传文件成功")}).catch(function(t){console.log(t),e.$message.error("系统异常，请稍后再试")})},beforeUpload:function(t){return"application/pdf"!==t.type?(this.$message.warning("上传文件类型只能为pdf"),!1):Math.ceil(t.size/1024/1024)>2?(this.$message.warning("上传文件大小不能超过 2M"),!1):(this.dialogConfig.docTpCopy=t.type.slice(t.type.indexOf("/")+1),!0)},exceed:function(){this.$message.warning("上传文档数不超过一个")},init:function(){this.getData()}},created:function(){this.init()},filters:{filterTp:function(t){switch(t){case"1":return"操作指南";case"2":return"开发支持";case"3":return"上线问题"}}}},s=c,l=(n("a05c"),n("9833"),n("048f")),u=Object(l["a"])(s,o,i,!1,null,"5cedf6b8",null);u.options.__file="index.vue";e["default"]=u.exports},"4f45":function(t,e,n){(function(t){var o="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function a(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new a(i.call(setTimeout,o,arguments),clearTimeout)},e.setInterval=function(){return new a(i.call(setInterval,o,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(o,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n("de8a"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("bc2c"))},8166:function(t,e,n){"use strict";var o=n("508a"),i=RegExp.prototype.exec,a=String.prototype.replace,r=i,c="lastIndex",s=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[c]||0!==e[c]}(),l=void 0!==/()??/.exec("")[1],u=s||l;u&&(r=function(t){var e,n,r,u,d=this;return l&&(n=new RegExp("^"+d.source+"$(?!\\s)",o.call(d))),s&&(e=d[c]),r=i.call(d,t),s&&r&&(d[c]=d.global?r.index+r[0].length:e),l&&r&&r.length>1&&a.call(r[0],n,function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(r[u]=void 0)}),r}),t.exports=r},"822e":function(t,e,n){"use strict";var o=n("8166");n("a345")({target:"RegExp",proto:!0,forced:o!==/./.exec},{exec:o})},8383:function(t,e,n){"use strict";var o=n("2724"),i=n("31e8"),a=n("c2ce"),r=n("2915"),c=n("c576"),s=n("e76c"),l=Math.max,u=Math.min,d=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,p=/\$([$&`']|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};n("224e")("replace",2,function(t,e,n,h){return[function(o,i){var a=t(this),r=void 0==o?void 0:o[e];return void 0!==r?r.call(o,a,i):n.call(String(a),o,i)},function(t,e){var i=h(n,t,this,e);if(i.done)return i.value;var d=o(t),f=String(this),p="function"===typeof e;p||(e=String(e));var m=d.global;if(m){var b=d.unicode;d.lastIndex=0}var y=[];while(1){var C=s(d,f);if(null===C)break;if(y.push(C),!m)break;var w=String(C[0]);""===w&&(d.lastIndex=c(f,a(d.lastIndex),b))}for(var S="",x=0,T=0;T<y.length;T++){C=y[T];for(var _=String(C[0]),q=l(u(r(C.index),f.length),0),$=[],D=1;D<C.length;D++)$.push(g(C[D]));var E=C.groups;if(p){var I=[_].concat($,q,f);void 0!==E&&I.push(E);var k=String(e.apply(void 0,I))}else k=v(_,f,q,$,E,e);q>=x&&(S+=f.slice(x,q)+k,x=q+_.length)}return S+f.slice(x)}];function v(t,e,o,a,r,c){var s=o+t.length,l=a.length,u=p;return void 0!==r&&(r=i(r),u=f),n.call(c,u,function(n,i){var c;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,o);case"'":return e.slice(s);case"<":c=r[i.slice(1,-1)];break;default:var u=+i;if(0===u)return i;if(u>l){var f=d(u/10);return 0===f?i:f<=l?void 0===a[f-1]?i.charAt(1):a[f-1]+i.charAt(1):i}c=a[u-1]}return void 0===c?"":c})}})},"865d":function(t,e,n){},9833:function(t,e,n){"use strict";var o=n("abb4"),i=n.n(o);i.a},a05c:function(t,e,n){"use strict";var o=n("865d"),i=n.n(o);i.a},abb4:function(t,e,n){},c576:function(t,e,n){"use strict";var o=n("3bf0")(!0);t.exports=function(t,e,n){return e+(n?o(t,e).length:1)}},c839:function(t,e,n){var o=n("e6bd").f,i=Function.prototype,a=/^\s*function ([^ (]*)/,r="name";r in i||n("4f1d")&&o(i,r,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},d722:function(t,e,n){"use strict";n.d(e,"e",function(){return o}),n.d(e,"f",function(){return i}),n.d(e,"a",function(){return a}),n.d(e,"d",function(){return r}),n.d(e,"c",function(){return c}),n.d(e,"b",function(){return s});var o={queryEntity:"/iequip/v1/portal/realNmAudits/queryEntity",rlnmAdtIdGet:function(t){return"/iequip/v1/portal/realNmAudits/".concat(t)},rlnmAuthenStPatch:function(t){return"/iequip/v1/portal/realNmAudits/".concat(t,"/rlnmAuthenSt")}},i={register:"/iequip/v1/portal/accounts",resetPWD:"/iequip/v1/portal/accounts/credential"},a={add:"/iequip/v1/portal/docs",deleteDoc:function(t){return"/iequip/v1/portal/docs/".concat(t)},editDoc:function(t){return"/iequip/v1/portal/docs/".concat(t)},query:"/iequip/v1/portal/docs/docBlngSbj/iequip",editQuery:function(t){return"/iequip/v1/portal/docs/".concat(t)}},r={query:"/iequip/v1/portal/vers/queryEntity",getVersion:function(t){return"/iequip/v1/portal/vers/".concat(t)},subApprove:function(t){return"/iequip/v1/portal/apps/".concat(t,"/vers")},getListById:function(t){return"/iequip/v1/portal/apps/".concat(t,"/vers")},handle:function(t){return"/iequip/v1/portal/vers/".concat(t,"/verSt")},queryActions:function(t){return"/iequip/v1/portal/vers/".concat(t,"/actions")}},c={query:"/iequip/v1/portal/apps/queryEntity",updateStatus:function(t,e){return"/iequip/v1/portal/apps/".concat(t,"/").concat(e)},editQuery:function(t){return"/iequip/v1/portal/apps/".concat(t)},deletePro:function(t){return"/iequip/v1/portal/apps/".concat(t)},editPro:function(t){return"/iequip/v1/portal/apps/".concat(t)}},s={queryType:function(t){return"/iequip/v1/portal/typeinfo/".concat(t)},add:"/product/v1/product",specify:function(t){return"/product/v1/products/".concat(t)},query:"/product/v1/products",edit:function(t){return"/product/v1/products/".concat(t)},deletePro:function(t,e){return"/product/v1/products/".concat(t,"/").concat(e)},bindResource:function(t){return"/product/v1/products/".concat(t,"/bind")}}},de8a:function(t,e,n){(function(t,e){(function(t,n){"use strict";if(!t.setImmediate){var o,i=1,a={},r=!1,c=t.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(t);s=s&&s.setTimeout?s:t,"[object process]"==={}.toString.call(t.process)?p():g()?h():t.MessageChannel?v():c&&"onreadystatechange"in c.createElement("script")?m():b(),s.setImmediate=l,s.clearImmediate=u}function l(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return a[i]=r,o(i),i++}function u(t){delete a[t]}function d(t){var e=t.callback,o=t.args;switch(o.length){case 0:e();break;case 1:e(o[0]);break;case 2:e(o[0],o[1]);break;case 3:e(o[0],o[1],o[2]);break;default:e.apply(n,o);break}}function f(t){if(r)setTimeout(f,0,t);else{var e=a[t];if(e){r=!0;try{d(e)}finally{u(t),r=!1}}}}function p(){o=function(t){e.nextTick(function(){f(t)})}}function g(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function h(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&f(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),o=function(n){t.postMessage(e+n,"*")}}function v(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;f(e)},o=function(e){t.port2.postMessage(e)}}function m(){var t=c.documentElement;o=function(e){var n=c.createElement("script");n.onreadystatechange=function(){f(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function b(){o=function(t){setTimeout(f,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n("bc2c"),n("6fcb"))},e76c:function(t,e,n){"use strict";var o=n("0c62"),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var a=n.call(t,e);if("object"!==typeof a)throw new TypeError("RegExp exec method returned something other than an Object or null");return a}if("RegExp"!==o(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},f121:function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return i});n("ff66"),n("ea23"),n("dbff");var o="/home/ap/nas/iequip/",i=["IEQUIPOPM00000000001","IEQUIPOPM00000000002","IEQUIPOPM00000000003"]}}]);
//# sourceMappingURL=docMaintain.99629a59.js.map